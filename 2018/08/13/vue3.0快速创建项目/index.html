<!DOCTYPE html>
<html lang=zh-CN>
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="description" content="互联网前端学习">
  <meta name="keywords" content="">
  
    <link rel="icon" href="/favicon.ico">
  
    
  <title>vue3.0快速创建项目 | 眭加凤的博客</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="/lib/jquery.fancybox.min.css">
</head>

<body>
    <div class="website_bg"></div>
  <header>
  <div class="header-container">
    <a class='logo' href="/">
      <span>眭加凤的博客</span>
    </a>
    <ul class="right-header">
      
        <li class="nav-item">
          
            <a href="/" class="item-link">首页</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/about" class="item-link">关于</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/archives" class="item-link">归档</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/tags" class="item-link">标签</a>
          
        </li>
      
    </ul>
  </div>
</header>

  <main id='post'>
  <div class="content">
    <article>
        <section class="content markdown-body">
          <h1>vue3.0快速创建项目</h1>
          <div class='post-meta'>
            <i class="fa fa-calendar" aria-hidden="true"></i> <time>2018年08月13日</time>
            
            
          </div>
          <h4 id="前置条件"><a href="#前置条件" class="headerlink" title="前置条件"></a>前置条件</h4><p>更新npm到最新版本<br>命令行运行: </p>
<pre><code>npm install -g npm 
</code></pre><p>npm就自动为我们更新到最新版本</p>
<p>使用 npm 全局安装 vue-cli ：</p>
<pre><code>npm i -g @vue/cli
</code></pre><h4 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h4><p>执行：</p>
<pre><code>vue create my-project   // my-project是要创建的文件夹
</code></pre><p>此处有两个选择：</p>
<p><code>default (babel, eslint)</code>    // 默认套餐，提供babel和eslint支持</p>
<p><code>Manually select features</code>  // 自己去选择需要的功能，提供更多的特性选择。</p>
<p>比如如果想要支持 TypeScript ，就应该选择这一项。</p>
<p>可以使用上下方向键来切换选项。</p>
<p>如果只需要 babel 和 eslint 支持，那么选择第一项，就完事了，静静等待 vue 初始化项目。</p>
<p>vue-cli 内置支持了8个功能特性，可以多选：使用方向键在特性选项之间切换，使用空格键选中当前特性，使用 a 键切换选择所有，使用 i 键翻转选项。</p>
<p>对于每一项的功能，此处做个简单描述：</p>
<pre><code>TypeScript                //支持使用 TypeScript 书写源码
Progressive Web App (PWA) //Support PWA 支持。
Router                    //支持 vue-router 。
Vuex 支持 vuex 。
CSS Pre-processors        //支持 CSS 预处理器。
Linter / Formatter        //支持代码风格检查和格式化。
Unit Testing              //支持单元测试。
E2E Testing               //支持 E2E 测试。
</code></pre><p>我选择了 Router，Vuex，CSS Pre-processors，Linter / Formatter</p>
<p>按住enter进入下一步，接下来都是对之前每项选项的更详细的选择。<br>css选择SCSS/SASS</p>
<p>Linter / Formatter选择prettier</p>
<p>这一步就是要选择配置文件的位置了。</p>
<p>对于<code>Babel 、 PostCSS</code> 等，都可以有自己的配置文件：<code>.babelrc 、 .postcssrc</code> 等等，同时也可以把配置信息放在 package.json 里面。此处出于对编辑器（ Visual Studio Code ）的友好支持（编辑器一般默认会在项目根目录下寻找配置文件），选择把配置文件放在外面，选择 <code>In dedicated config files</code><br>待补充<br>Save this as a preset for future projects?</p>
<p>这个就是问要不要把当前的这一系列选项配置保存起来，方便下一次创建项目时复用。选择y。</p>
<p>选完之后， vue-cli 就根据前面选择的内容，开始初始化项目了。</p>
<h4 id="启动项目"><a href="#启动项目" class="headerlink" title="启动项目"></a>启动项目</h4><p>初始完之后，进入到项目根目录： <code>cd my-project</code> 启动项目： <code>npm run serve</code> 稍等一会儿，可以看到自动在浏览器中打开了</p>
<p>安装PostCSS插件<br>通过Vue-cli构建的项目，在项目的根目录下有一个.postcssrc.js，默认情况下已经有了：</p>
<pre><code>module.exports = {
        plugins: {
          autoprefixer: {}
        }
}
</code></pre><p>5<br>配置成</p>
<pre><code>module.exports = {
        plugins: {
          &quot;postcss-import&quot;:{},
          &quot;postcss-url&quot;:{},
          &quot;autoprefixer&quot;: {}
        }
}
</code></pre><p>安装postcss-import和postcss-url插件 </p>
<p><code>$ npm install postcss-import</code>和$ <code>npm install postcss-url
postcss-import</code>相关配置点击这里。主要功有是解决@import引入路径问题。使用这个插件，可以让你很轻易的使用本地文件、node_modules或者web_modules的文件。这个插件配合postcss-url让你引入文件变得更轻松。</p>
<p><code>postcss-url</code>相关配置可以点击这里。该插件主要用来处理文件，比如图片文件、字体文件等引用路径的处理。在Vue项目中，vue-loader已具有类似的功能，只需要配置中将vue-loader配置进去。<br><code>autoprefixe</code>r插件是用来自动处理浏览器前缀的一个插件。如果你配置了<code>postcss-cssnext</code>，其中就已具备了autoprefixer的功能。</p>
<p>在配置的时候，未显示的配置相关参数的话，表示使用的是Browserslist指定的列表参数，你也可以像这样来指定last 2 versions 或者 &gt; 5%。如此一来，你在编码时不再需要考虑任何浏览器前缀的问题，可以专心撸码。这也是PostCSS最常用的一个插件之一。</p>
<h4 id="配置插件"><a href="#配置插件" class="headerlink" title="配置插件"></a>配置插件</h4><p>我们要完成vw的布局兼容方案，或者说让我们能更专心的撸码，还需要配置下面的几个PostCSS插件：</p>
<pre><code>postcss-aspect-ratio-mini
postcss-px-to-viewport
postcss-write-svg
postcss-cssnext
cssnano
postcss-viewport-units
</code></pre><p>要使用<br>安装成功后，在项目根目录下的package.json文件中，可以看到新安装的依赖包：</p>
<pre><code>&quot;dependencies&quot;: {
    &quot;cssnano&quot;: &quot;^3.10.0&quot;,
    &quot;postcss-aspect-ratio-mini&quot;: &quot;^0.0.2&quot;,
    &quot;postcss-cssnext&quot;: &quot;^3.1.0&quot;,
    &quot;postcss-import&quot;: &quot;^11.1.0&quot;,
    &quot;postcss-px-to-viewport&quot;: &quot;^0.0.3&quot;,
    &quot;postcss-url&quot;: &quot;^7.3.2&quot;,
    &quot;postcss-viewport-units&quot;: &quot;^0.1.4&quot;,
    &quot;postcss-write-svg&quot;: &quot;^3.0.1&quot;,
    &quot;vue&quot;: &quot;^2.5.16&quot;,
    &quot;vue-router&quot;: &quot;^3.0.1&quot;,
    &quot;vuex&quot;: &quot;^3.0.1&quot;
  },
</code></pre><p>接下来在.postcssrc.js文件对新安装的PostCSS插件进行配置：</p>
<pre><code>module.exports = {
  plugins: {
    &quot;postcss-import&quot;: {},
    &quot;postcss-url&quot;: {},
    //&quot;autoprefixer&quot;: {},
    &quot;postcss-aspect-ratio-mini&quot;: {},
    &quot;postcss-write-svg&quot;: {
      utf8: false
    },
    &quot;postcss-cssnext&quot;: {},
    &quot;postcss-px-to-viewport&quot;: {
      viewportWidth: 750, //视窗的宽度，对应的是我们设计稿的宽度，一般是750
      viewportHeight: 1334, //视窗的高度，根据750设备的宽度来置顶，一般指定1334，也可以不配置
      unitPrecision: 3, //指定&apos;px&apos;转换为视窗单位值的小数位数（很多时候无法整除）
      viewportUnit: &apos;vw&apos;, //指定需要转换成的视窗单位，建议使用vw
      selectorBlackList: [&apos;.ignore&apos;, &apos;.hairlines&apos;, &apos;.g-vw-no&apos;], //指定不转行为视窗单位的类，可以自定义，可以无限添加，建议定义一至两个通用的类名
      minPixeValue: 1, //小于或等于&apos;1px&apos;不转换为视窗单位，你也可以设置为你想要的值
      mediaQuery: false //允许在媒体查询中转换&apos;px&apos;
    },
    &quot;postcss-viewport-units&quot;: {},
    &quot;cssnano&quot;: {
      preset: &quot;advanced&quot;,
      autoprefixer: false,
      &quot;postcss-zindex&quot;: false
    }
  }
}
</code></pre><p>特别声明：由于cssnext和cssnano都具有autoprefixer,事实上只需要一个，所以把默认的autoprefixer删除掉，然后把cssnano中的autoprefixer设置为false。对于其他的插件使用，稍后会简单的介绍。</p>
<p>由于配置文件修改了，所以重新跑一下npm run dev。</p>
<p>项目就可以正常看到了。接下来简单的介绍一下后面安装的几个插件的作用。</p>
<h4 id="打包上线"><a href="#打包上线" class="headerlink" title="打包上线"></a>打包上线</h4><p>在开发完项目之后，就应该打包上线了。 vue-cli 也提供了打包的命令，在项目根目录下执行： </p>
<pre><code>npm run build 
</code></pre><p>执行完之后，可以看到在项目根目录下多出了一个 dist 目录，该目录下就是打包好的所有静态资源，直接部署到静态资源服务器就好了。</p>
<p>下面作个总结</p>
<p> Vue3.0 与 Vue2.0 区别：</p>
<h4 id="一、创建项目命令的变化。"><a href="#一、创建项目命令的变化。" class="headerlink" title="一、创建项目命令的变化。"></a>一、创建项目命令的变化。</h4><pre><code>vue create my-project //vue3.0创建方式
vue init webpack my-project   //Vue2.0 创建方式 
</code></pre><p>同时3.0 版本包括默认预设配置 和 用户自定义配置</p>
<ul>
<li>TypeScript</li>
<li>Progressive Web App (PWA) Support</li>
<li>Router</li>
<li>Vuex</li>
<li>CSS Pre-processors</li>
<li>Linter / Formatter</li>
<li>Unit Testing</li>
<li>E2E Testing</li>
</ul>
<h4 id="二、-项目目录结构变化："><a href="#二、-项目目录结构变化：" class="headerlink" title="二、 项目目录结构变化："></a>二、 项目目录结构变化：</h4><p>我们对比发现 vue-cli 3.0 默认项目目录相比 2.0 来说精简了很多。</p>
<ul>
<li>移除了配置文件目录， config 和 build 文件夹。</li>
<li>移除了 static 文件夹，新增 public 文件夹，并且 index.html 移动到 public 中。</li>
<li>在 src 文件夹中新增了 views 文件夹，用于分类 视图组件 和 公共组件。</li>
</ul>
<h4 id="三-移除了配置文件目录后如何自定义配置。"><a href="#三-移除了配置文件目录后如何自定义配置。" class="headerlink" title="三.移除了配置文件目录后如何自定义配置。"></a>三.移除了配置文件目录后如何自定义配置。</h4><p>从 3.0 版本开始，在项目的根目录放置一个 vue.config.js 文件, 可以配置该项目的很多方面。</p>
<p>vue.config.js 应该导出一个对象，例如：</p>
<pre><code>module.exports = {
 baseUrl: &apos;/&apos;,
 outputDir: &apos;dist&apos;,
 lintOnSave: true,
 compiler: false,
 // 调整内部的 webpack 配置。
 // 查阅 https://github.com/vuejs/vue-doc-zh-cn/vue-cli/webpack.md
 chainWebpack: () =&gt; {},
 configureWebpack: () =&gt; {},
 // 配置 webpack-dev-server 行为。
 devServer: {
  open: process.platform === &apos;darwin&apos;,
  host: &apos;0.0.0.0&apos;,
  port: 8080,
  https: false,
  hotOnly: false,
  // 查阅 https://github.com/vuejs/vue-doc-zh-cn/vue-cli/cli-service.md#配置代理
  proxy: null, // string | Object
  before: app =&gt; {}
 }
 ....
}
</code></pre><p>调整 webpack 配置最简单的方式就是在 vue.config.js 中的 configureWebpack 选项提供一个对象，该对象将会被 webpack-merge 合并入最终的 webpack 配置。</p>
<p>示例代码：配置 webpack 新增一个插件。</p>
<pre><code>// vue.config.js
module.exports = {
 configureWebpack: {
  plugins: [
   new MyAwesomeWebpackPlugin()
  ]
 }
}
</code></pre><p>修改插件选项的参数你需要熟悉 webpack-chain 的 API 并阅读一些源码以便了解如何权衡这个选项的全部配置项，但是它给了你比直接修改 webpack 配置中的值更灵活且安全的方式。</p>
<pre><code>// vue.config.js
module.exports = {
  chainWebpack: config =&gt; {
    config
      .plugin(&apos;html&apos;)
      .tap(args =&gt; {
        return [/* new args to pass to html-webpack-plugin&apos;s constructor */]
      })
  }
}
</code></pre><h4 id="四-ESLint、Babel、browserslist-相关配置："><a href="#四-ESLint、Babel、browserslist-相关配置：" class="headerlink" title="四. ESLint、Babel、browserslist 相关配置："></a>四. ESLint、Babel、browserslist 相关配置：</h4><ul>
<li><p>Babel 可以通过 .babelrc 或 package.json 中的 babel 字段进行配置。</p>
</li>
<li><p>ESLint 可以通过 .eslintrc 或 package.json 文件中的 eslintConfig 字段进行配置。</p>
</li>
<li><p>你可能注意到了 package.json 中的 browserslist 字段指定了该项目的目标浏览器支持范围。</p>
</li>
</ul>
<h4 id="五-关于-public-目录的调整。"><a href="#五-关于-public-目录的调整。" class="headerlink" title="五. 关于 public 目录的调整。"></a>五. 关于 public 目录的调整。</h4><p>vue 约定 public/index.html 作为入口模板会通过 html-webpack-plugin 插件处理。在构建过程中，资源链接将会自动注入其中。除此之外，vue-cli 也自动注入资源提示( preload/prefetch ), 在启用 PWA 插件时注入 manifest/icon 链接, 并且引入(inlines) webpack runtime / chunk manifest 清单已获得最佳性能。</p>
<p>在 JavaScript 或者 SCSS 中通过 相对路径 引用的资源会经过 webpack 处理。放置在 public 文件的资源可以通过绝对路径引用，这些资源将会被复制，而不经过 webpack 处理。</p>
<p>小提示：图片最好使用相对路径经过 webpack 处理，这样可以避免很多因为修改网站根目录导致的图片404问题。</p>

        </section>
    </article>
    <!-- 文末导航 s-->
    <div class="article-nav prev-next-wrap clearfix">
        
            <a href="/2018/08/20/ES6语法常用特性总结/" class="fl pre-post btn btn-default" title='ES6语法常用特性总结'>
                <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
                <span class="hidden-xs">ES6语法常用特性总结</span>
            </a>
        
        
            <a href="/2018/07/12/webpack4的学习与填坑/" class="fr next-post btn btn-default" title='webpack4的学习与填坑'>
                <span class="hidden-lg">下一篇</span>
                <span class="hidden-xs">webpack4的学习与填坑</span><i class="fa fa-angle-right fa-fw"></i>
            </a>
        
    </div>
 <!-- 文末导航 e -->
 
  <!-- disqus 评论框 start -->
  <div class="comment">
      <div id="disqus_thread" class="disqus-thread">
        <i>加载评论框需要翻墙</i>
      </div>
  </div>
  <!-- disqus 评论框 end -->

  

    
</div>
<aside>

<div class="toc-container">
  <h1>目录</h1>
  <div class="content">
      <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#前置条件"><span class="toc-number">1.</span> <span class="toc-text">前置条件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建项目"><span class="toc-number">2.</span> <span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#启动项目"><span class="toc-number">3.</span> <span class="toc-text">启动项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置插件"><span class="toc-number">4.</span> <span class="toc-text">配置插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#打包上线"><span class="toc-number">5.</span> <span class="toc-text">打包上线</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#一、创建项目命令的变化。"><span class="toc-number">6.</span> <span class="toc-text">一、创建项目命令的变化。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#二、-项目目录结构变化："><span class="toc-number">7.</span> <span class="toc-text">二、 项目目录结构变化：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#三-移除了配置文件目录后如何自定义配置。"><span class="toc-number">8.</span> <span class="toc-text">三.移除了配置文件目录后如何自定义配置。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#四-ESLint、Babel、browserslist-相关配置："><span class="toc-number">9.</span> <span class="toc-text">四. ESLint、Babel、browserslist 相关配置：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#五-关于-public-目录的调整。"><span class="toc-number">10.</span> <span class="toc-text">五. 关于 public 目录的调整。</span></a></li></ol>
  </div>
</div>

</aside>
</main>





<!-- disqus 公共JS代码 -->
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES * * */
var disqus_shortname = "suijiafeng";
var disqus_identifier = "http://suijiafeng.com/2018/08/13/vue3.0快速创建项目/";
var disqus_url = "http://suijiafeng.com/2018/08/13/vue3.0快速创建项目/";
isAgent(getDisqus)
// determine user agent in China
function isAgent(cb) {
var url = '//graph.facebook.com/feed?callback=h';
var xhr = new XMLHttpRequest();
var called = false;
xhr.open('GET', url);
xhr.onreadystatechange = function() {
if (xhr.readyState === 4 && xhr.status === 200) {
called = true;
cb(true);
}
};
xhr.send();
// timeout 1s, this facebook API is very fast.
setTimeout(function() {
if (!called) {
xhr.abort();
cb(false)
}
}, 1000);
}
function getDisqus(isAgent) {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; 
dsq.async = true
dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq)
}
</script>
<!-- disqus 公共JS代码 end -->




  <footer class="footer-bg" style="background: #23282D; margin:20px 0 5px 0;">
  <div class="copyright" >
    <div style="margin: 0 auto">
        <p style="text-align:center">COPYRIGHT  2018  眭加凤.  ALL RIGHTS RESERVED.</p>
    </div>
  </div>
</footer>


<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="/lib/in-view.min.js"></script>
<script src="/lib/lodash.min.js"></script>
<script>
  var isDown = true
  var oldY = 0
  inView.offset(50)

  document.body.addEventListener('touchstart', function(){});
  
  window.addEventListener('scroll', _.throttle(e => {
    var currentY = window.scrollY
    if((oldY - currentY) < 0) {
      isDown = true
    } else {
      isDown = false
    }
    oldY = currentY
  }, 250))

  $("article img").each(function() {
      var strA = "<a data-fancybox='gallery' href='" + this.src + "'></a>";
      $(this).wrapAll(strA);
  });

  $('.toc-link').each(function() {
      var href = $(this).attr("href");
      
      inView(href).on('exit', () => {
        if (isDown) {
          handleActive(href)
        }
      })

      inView(href).on('enter', () => {
        if (!isDown) {
          handleActive(href)
        }
      })

      this.onclick = function(e) {
        var pos = $(href).offset().top - 10;
        $("html,body").animate({scrollTop: pos}, 300);
        setTimeout(() => {
          handleActive(href)
        }, 350)
        return false
      }
  })

  function handleActive(href) {
    document.querySelectorAll('.toc-link').forEach(elm => {
      elm.classList.remove('active')
    })
    document.querySelector(".toc [href='"+ href +"']").classList.add('active')
  }
</script>
<script src="/lib/jquery.fancybox.min.js"></script>



</body>
</html>
